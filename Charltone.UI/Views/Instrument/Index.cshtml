@using Charltone.UI.ViewModels.Instrument;
@using Charltone.UI.Helpers;

@model InstrumentListViewModel

@{
    ViewBag.Title = "Charltone Instruments";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script>
    $(document).ready(function () {
        position.set();
    });
</script>

<div id="carousel-container"></div>
<div id="instrlist">
    <div id="instrlistcontent">
        <div id="instrlistheader">
            @Model.Banner
        </div>
        <div id="instrlistshowcarousel">
            <button class="btn btn-info btn-sm" type="button" onclick='javascript:instrument.carousel.show();'>View Slides</button>
        </div>
        @if (Request.IsAuthenticated)
        {
            <div id="instrlistaddnew">
                <button class="btn btn-success btn-sm" type="button" onclick="location.href = '@Url.Action("Create", "Instrument")'">Add</button>
            </div>
        }
        <div class="linehorizontal" id="instrument"></div>
        @{
            var row = 1;
            var totalrows = Model.Instruments.Count();
            foreach (var inst in Model.Instruments)
            {
                <div id="instrlistdetail">
                    <div id="instrlistitem">
                        <div>
                            <div>
                                <label class="@inst.StatusCssClassId">
                                    @(inst.ShowPrice ? inst.Price : inst.Status)
                                </label>
                            </div>
                            <a id="@string.Format("img_{0}", @inst.DefaultPhotoId)" href="@Url.Action("Detail", "Instrument", new { id = @inst.ProductId })">
                                <img id="@inst.DefaultPhotoId" class="instrlistdefaultphoto" src=@Url.Action("GetPhoto", "Instrument", new InstrumentPhotoModel
                                                                                                                                       {
                                                                                                                                           PhotoId = inst.DefaultPhotoId,
                                                                                                                                           Width = Convert.ToInt32(@Model.MaxImageWidth),
                                                                                                                                           Height = Convert.ToInt32(@Model.MaxImageHeight)
                                                                                                                                       }) alt="" />
                            </a>
                            <div id="instrlistinfomodel">
                                @inst.ModelSn
                                <label id="instrlistinfonotposted">
                                    @inst.NotPostedMessage
                                </label>
                            </div>
                            <div id="instrlistinfodetail">
                                @inst.Classification / @inst.SubClassification
                            </div>
                            <div class="instrlistviewdetailslink">
                                @if (Request.IsAuthenticated)
                                {
                                    <button class="btn btn-primary btn-xs" type="button" onclick="location.href='@Url.Action("Edit", "Instrument", new { id = inst.ProductId })'">Edit</button>
                                    <button class="btn btn-info btn-xs" type="button" onclick="location.href='@Url.Action("Detail", "Instrument", new { id = inst.ProductId })'">Photos</button>
                                }
                                else
                                {
                                    <button class="btn btn-info btn-xs" type="button" onclick="location.href='@Url.Action("Detail", "Instrument", new { id = inst.ProductId })'">Details</button>
                                }

                            </div>
                        </div>
                    </div>
                </div>
                if (0 == (row % 3) || totalrows == row)
                {
                    <div class="linehorizontal" id="instrument"></div>
                }
                row++;
            }
        }
    </div>
    <div id='dialog-image-container'></div>
</div>